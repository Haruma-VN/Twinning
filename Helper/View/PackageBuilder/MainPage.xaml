<Page
	x:Class="Helper.View.PackageBuilder.MainPage"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:community="using:CommunityToolkit.WinUI"
	xmlns:communityControls="using:CommunityToolkit.WinUI.Controls"
	xmlns:local="using:Helper"
	xmlns:localViewPackageBuilder="using:Helper.View.PackageBuilder"
	xmlns:localViewModdingWorker="using:Helper.View.ModdingWorker"
	xmlns:my="using:Helper.Control"
	mc:Ignorable="d"
	x:DefaultBindMode="OneWay"
	AllowDrop="True"
	DragOver="{x:Bind Controller.uPage_DragOver}"
	Drop="{x:Bind Controller.uPage_Drop}"
>
	<Page.Resources>
		<CollectionViewSource
			x:Name="uGroupList_ItemsSource"
			IsSourceGrouped="True"
			ItemsPath="Children"
			Source="{x:Bind Controller.uGroupList_ItemsSource}"
		/>
		<CollectionViewSource
			x:Name="uResourceList_ItemsSource"
			IsSourceGrouped="True"
			ItemsPath="Children"
			Source="{x:Bind Controller.uResourceList_ItemsSource}"
		/>
	</Page.Resources>
	<my:Stack
		Padding="4,4"
		MinWidth="1680"
		Orientation="Horizontal" Spacing="4"
	>
		<my:Stack
			Padding="0,-4,0,0"
			Width="352"
			VerticalAlignment="Stretch"
			Orientation="Vertical" Spacing="0"
		>
			<my:HeaderBar
				HorizontalAlignment="Stretch"
				Icon="{StaticResource FluentIconGlyph.FileExplorer}"
				Title="Project"
			>
				<my:HeaderBar.Action>
					<my:Stack
						Padding="0,0"
						Orientation="Horizontal" Spacing="8"
					>
						<ProgressRing
							Width="22" Height="22"
							IsActive="{x:Bind Controller.uWorkerProgress_IsActive}"
						/>
						<Button
							x:Name="uWorkerButton" x:FieldModifier="public"
							VerticalAlignment="Center"
							Content="{community:FontIcon FontSize={StaticResource MediumIconSize}, Glyph={StaticResource FluentIconGlyph.ProvisioningPackage}}"
							Style="{x:Bind Controller.uWorkerButton_Style}"
						>
							<Button.Flyout>
								<Flyout Placement="Full">
									<Flyout.FlyoutPresenterStyle>
										<Style TargetType="FlyoutPresenter" BasedOn="{StaticResource CompatFlyoutPresenterStyle}">
											<Setter Property="MaxWidth" Value="488" />
										</Style>
									</Flyout.FlyoutPresenterStyle>
									<localViewModdingWorker:MainPage
										x:Name="uWorkerPage" x:FieldModifier="public"
										HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
									/>
								</Flyout>
							</Button.Flyout>
						</Button>
						<Button
							VerticalAlignment="Center"
							Content="{community:FontIcon FontSize={StaticResource MediumIconSize}, Glyph={StaticResource FluentIconGlyph.More}}"
							IsEnabled="{x:Bind Controller.uLoadedAction_IsEnabled}"
						>
							<Button.Flyout>
								<MenuFlyout Placement="BottomEdgeAlignedRight">
									<MenuFlyoutSubItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.RepeatAll}}"
										Text="Transpile"
									>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.More}}"
											Text="Custom"
											Click="{x:Bind Controller.uProjectAction_Click}"
											Tag="TranspileCustom"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Previous}}"
											Text="Generalize"
											Click="{x:Bind Controller.uProjectAction_Click}"
											Tag="TranspileGeneralize"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Next}}"
											Text="Specialize"
											Click="{x:Bind Controller.uProjectAction_Click}"
											Tag="TranspileSpecialize"
										/>
									</MenuFlyoutSubItem>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Process}}"
										Text="Compile"
										Click="{x:Bind Controller.uProjectAction_Click}"
										Tag="Compile"
									/>
									<MenuFlyoutSubItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Connected}}"
										Text="Link"
									>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.History}}"
											Text="Legacy"
											Click="{x:Bind Controller.uProjectAction_Click}"
											Tag="LinkLegacy"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.DevUpdate}}"
											Text="Remake"
											Click="{x:Bind Controller.uProjectAction_Click}"
											Tag="LinkRemake"
										/>
									</MenuFlyoutSubItem>
									<MenuFlyoutSeparator />
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Refresh}}"
										Text="Reload"
										Click="{x:Bind Controller.uProjectAction_Click}"
										Tag="Reload"
									/>
									<MenuFlyoutSubItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.OpenInNewWindow}}"
										Text="Reveal"
									>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.TreeFolderFolderOpen}}"
											Text="Root"
											Click="{x:Bind Controller.uProjectAction_Click}"
											Tag="RevealRoot"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.ReportDocument}}"
											Text="Setting"
											Click="{x:Bind Controller.uProjectAction_Click}"
											Tag="RevealSetting"
										/>
									</MenuFlyoutSubItem>
								</MenuFlyout>
							</Button.Flyout>
						</Button>
					</my:Stack>
				</my:HeaderBar.Action>
			</my:HeaderBar>
			<my:Divider Height="{StaticResource DividerThickness}" />
			<my:Stack
				Padding="16,8,16,8"
				HorizontalAlignment="Stretch"
				Orientation="Vertical" Spacing="8"
			>
				<my:Stack
					Padding="0,0"
					VerticalAlignment="Stretch"
					Orientation="Horizontal" Spacing="8"
				>
					<TextBox
						my:Stack.Weight="1" HorizontalAlignment="Stretch"
						VerticalAlignment="Center"
						PlaceholderText="Project Directory"
						Text="{x:Bind Controller.uProjectDirectory_Text}"
						IsReadOnly="True"
					/>
					<Button
						VerticalAlignment="Center"
						Content="{community:FontIcon FontSize={StaticResource MediumIconSize}, Glyph={StaticResource FluentIconGlyph.OpenLocal}}"
						Click="{x:Bind Controller.uProjectOpen_Click}"
					/>
					<Button
						VerticalAlignment="Center"
						Content="{community:FontIcon FontSize={StaticResource MediumIconSize}, Glyph={StaticResource FluentIconGlyph.Clear}}"
						Click="{x:Bind Controller.uProjectClose_Click}"
						IsEnabled="{x:Bind Controller.uLoadedAction_IsEnabled}"
					/>
				</my:Stack>
			</my:Stack>
			<my:Divider Height="{StaticResource DividerThickness}" />
			<my:HeaderBar
				HorizontalAlignment="Stretch"
				Icon="{StaticResource FluentIconGlyph.DialShape3}"
				Title="Package"
			>
				<my:HeaderBar.Action>
					<my:Stack
						Padding="0,0"
						Orientation="Horizontal" Spacing="8"
					>
						<Button
							VerticalAlignment="Center"
							Content="{community:FontIcon FontSize={StaticResource MediumIconSize}, Glyph={StaticResource FluentIconGlyph.Add}}"
							Click="{x:Bind Controller.uPackageActionAppend_Click}"
							IsEnabled="{x:Bind Controller.uLoadedAction_IsEnabled}"
						/>
						<Button
							VerticalAlignment="Center"
							Content="{community:FontIcon FontSize={StaticResource MediumIconSize}, Glyph={StaticResource FluentIconGlyph.More}}"
							IsEnabled="{x:Bind Controller.uLoadedAction_IsEnabled}"
						>
							<Button.Flyout>
								<MenuFlyout Placement="BottomEdgeAlignedRight">
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Delete}}"
										Text="Delete"
										Click="{x:Bind Controller.uPackageAction_Click}"
										Tag="Delete"
									/>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.SaveCopy}}"
										Text="Copy"
										Click="{x:Bind Controller.uPackageAction_Click}"
										Tag="Copy"
									/>
								</MenuFlyout>
							</Button.Flyout>
						</Button>
					</my:Stack>
				</my:HeaderBar.Action>
			</my:HeaderBar>
			<my:Divider Height="{StaticResource DividerThickness}" />
			<ListView
				x:Name="uPackageList" x:FieldModifier="public"
				Padding="0,2,0,-2"
				my:Stack.Weight="1" VerticalAlignment="Stretch"
				HorizontalAlignment="Stretch"
				SelectionMode="Extended" IsItemClickEnabled="True"
				ItemsSource="{x:Bind Controller.uPackageList_ItemsSource}"
				SelectionChanged="{x:Bind Controller.uPackageList_SelectionChanged}"
				CanReorderItems="True" CanDragItems="True" AllowDrop="True"
				DragItemsCompleted="{x:Bind Controller.uPackageList_DragItemsCompleted}"
				ItemContainerTransitions="{x:Null}"
				IsEnabled="{x:Bind Controller.uLoadedAction_IsEnabled}"
			>
				<ListView.ItemTemplate>
					<DataTemplate x:DataType="localViewPackageBuilder:MainPagePackageItemController">
						<my:Stack
							Padding="0,8,4,8"
							Height="48"
							Orientation="Horizontal" Spacing="12"
						>
							<my:Box
								Padding="0,0"
								my:Stack.Weight="1" HorizontalAlignment="Stretch"
								VerticalAlignment="Center"
							>
								<TextBlock
									Padding="11,0,0,0"
									HorizontalAlignment="Stretch" VerticalAlignment="Center"
									Visibility="{x:Bind uName_Visibility}"
									Style="{StaticResource BodyTextBlockStyle}"
									TextWrapping="NoWrap"
									Text="{x:Bind uName_Text}"
								/>
								<TextBox
									Padding="10,6,6,6"
									HorizontalAlignment="Stretch" VerticalAlignment="Center"
									Visibility="{x:Bind uNameEdit_Visibility}"
									IsEnabled="{x:Bind uNameEdit_IsEnabled}"
									IsEnabledChanged="{x:Bind uNameEdit_IsEnabledChanged}"
									Text="{x:Bind uName_Text}"
									LostFocus="{x:Bind uNameEdit_LostFocus}"
								/>
							</my:Box>
							<InfoBadge
								VerticalAlignment="Center"
								Value="{x:Bind uCount_Value}"
							/>
							<my:Stack.ContextFlyout>
								<MenuFlyout>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.HomeGroup}}"
										Text="Part"
										Click="{x:Bind uAction_Click}"
										Tag="Part"
									/>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Settings}}"
										Text="Setting"
										Click="{x:Bind uAction_Click}"
										Tag="Setting"
									/>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Sustainable}}"
										Text="Variable"
										Click="{x:Bind uAction_Click}"
										Tag="Variable"
									/>
									<MenuFlyoutSeparator />
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Rename}}"
										Text="Rename"
										Click="{x:Bind uAction_Click}"
										Tag="Rename"
									/>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Delete}}"
										Text="Delete"
										Click="{x:Bind uAction_Click}"
										Tag="Delete"
									/>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.SaveCopy}}"
										Text="Copy"
										Click="{x:Bind uAction_Click}"
										Tag="Copy"
									/>
								</MenuFlyout>
							</my:Stack.ContextFlyout>
						</my:Stack>
					</DataTemplate>
				</ListView.ItemTemplate>
			</ListView>
		</my:Stack>
		<my:Divider Width="{StaticResource DividerThickness}" />
		<my:Stack
			Padding="0,-4,0,0"
			Width="352"
			VerticalAlignment="Stretch"
			Orientation="Vertical" Spacing="0"
		>
			<my:HeaderBar
				HorizontalAlignment="Stretch"
				Icon="{StaticResource FluentIconGlyph.TreeFolderFolder}"
				Title="Part"
			>
				<my:HeaderBar.Action>
					<my:Stack
						Padding="0,0"
						Orientation="Horizontal" Spacing="8"
					>
						<Button
							VerticalAlignment="Center"
							Content="{community:FontIcon FontSize={StaticResource MediumIconSize}, Glyph={StaticResource FluentIconGlyph.Add}}"
							Click="{x:Bind Controller.uPartActionAppend_Click}"
							IsEnabled="{x:Bind Controller.uLoadedAction_IsEnabled}"
						/>
						<Button
							VerticalAlignment="Center"
							Content="{community:FontIcon FontSize={StaticResource MediumIconSize}, Glyph={StaticResource FluentIconGlyph.More}}"
							IsEnabled="{x:Bind Controller.uLoadedAction_IsEnabled}"
						>
							<Button.Flyout>
								<MenuFlyout Placement="BottomEdgeAlignedRight">
									<MenuFlyoutSubItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.RepeatAll}}"
										Text="Transpile"
									>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.More}}"
											Text="Custom"
											Click="{x:Bind Controller.uPartAction_Click}"
											Tag="TranspileCustom"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Previous}}"
											Text="Generalize"
											Click="{x:Bind Controller.uPartAction_Click}"
											Tag="TranspileGeneralize"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Next}}"
											Text="Specialize"
											Click="{x:Bind Controller.uPartAction_Click}"
											Tag="TranspileSpecialize"
										/>
									</MenuFlyoutSubItem>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Process}}"
										Text="Compile"
										Click="{x:Bind Controller.uPartAction_Click}"
										Tag="Compile"
									/>
									<MenuFlyoutSeparator />
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Delete}}"
										Text="Delete"
										Click="{x:Bind Controller.uPartAction_Click}"
										Tag="Delete"
									/>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.SaveCopy}}"
										Text="Copy"
										Click="{x:Bind Controller.uPartAction_Click}"
										Tag="Copy"
									/>
									<MenuFlyoutSeparator />
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Refresh}}"
										Text="Reload"
										Click="{x:Bind Controller.uPartAction_Click}"
										Tag="Reload"
									/>
									<MenuFlyoutSubItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.OpenInNewWindow}}"
										Text="Reveal"
									>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.TreeFolderFolderOpen}}"
											Text="Root"
											Click="{x:Bind Controller.uPartAction_Click}"
											Tag="RevealRoot"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.ReportDocument}}"
											Text="Setting"
											Click="{x:Bind Controller.uPartAction_Click}"
											Tag="RevealSetting"
										/>
									</MenuFlyoutSubItem>
								</MenuFlyout>
							</Button.Flyout>
						</Button>
					</my:Stack>
				</my:HeaderBar.Action>
			</my:HeaderBar>
			<my:Divider Height="{StaticResource DividerThickness}" />
			<ListView
				x:Name="uPartList" x:FieldModifier="public"
				Padding="0,2,0,-2"
				my:Stack.Weight="1" VerticalAlignment="Stretch"
				HorizontalAlignment="Stretch"
				SelectionMode="Extended" IsItemClickEnabled="True"
				ItemsSource="{x:Bind Controller.uPartList_ItemsSource}"
				SelectionChanged="{x:Bind Controller.uPartList_SelectionChanged}"
				ItemContainerTransitions="{x:Null}"
				IsEnabled="{x:Bind Controller.uLoadedAction_IsEnabled}"
			>
				<ListView.ItemTemplate>
					<DataTemplate x:DataType="localViewPackageBuilder:MainPagePartItemController">
						<my:Stack
							Padding="0,8,4,8"
							Height="48"
							Orientation="Horizontal" Spacing="12"
							AllowDrop="True"
							DragOver="{x:Bind uRoot_DragOver}"
							Drop="{x:Bind uRoot_Drop}"
						>
							<my:Box
								Padding="0,0"
								my:Stack.Weight="1" HorizontalAlignment="Stretch"
								VerticalAlignment="Center"
							>
								<TextBlock
									Padding="11,0,0,0"
									HorizontalAlignment="Stretch" VerticalAlignment="Center"
									Visibility="{x:Bind uName_Visibility}"
									Style="{StaticResource BodyTextBlockStyle}"
									TextWrapping="NoWrap"
									Text="{x:Bind uName_Text}"
								/>
								<TextBox
									Padding="10,6,6,6"
									HorizontalAlignment="Stretch" VerticalAlignment="Center"
									Visibility="{x:Bind uNameEdit_Visibility}"
									IsEnabled="{x:Bind uNameEdit_IsEnabled}"
									IsEnabledChanged="{x:Bind uNameEdit_IsEnabledChanged}"
									Text="{x:Bind uName_Text}"
									LostFocus="{x:Bind uNameEdit_LostFocus}"
								/>
							</my:Box>
							<InfoBadge
								VerticalAlignment="Center"
								Value="{x:Bind uCount_Value}"
							/>
							<my:Stack.ContextFlyout>
								<MenuFlyout>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Sustainable}}"
										Text="Variable"
										Click="{x:Bind uAction_Click}"
										Tag="Variable"
									/>
									<MenuFlyoutSeparator />
									<MenuFlyoutSubItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.RepeatAll}}"
										Text="Transpile"
									>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.More}}"
											Text="Custom"
											Click="{x:Bind uAction_Click}"
											Tag="TranspileCustom"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Previous}}"
											Text="Generalize"
											Click="{x:Bind uAction_Click}"
											Tag="TranspileGeneralize"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Next}}"
											Text="Specialize"
											Click="{x:Bind uAction_Click}"
											Tag="TranspileSpecialize"
										/>
									</MenuFlyoutSubItem>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Process}}"
										Text="Compile"
										Click="{x:Bind uAction_Click}"
										Tag="Compile"
									/>
									<MenuFlyoutSeparator />
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Rename}}"
										Text="Rename"
										Click="{x:Bind uAction_Click}"
										Tag="Rename"
									/>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Delete}}"
										Text="Delete"
										Click="{x:Bind uAction_Click}"
										Tag="Delete"
									/>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.SaveCopy}}"
										Text="Copy"
										Click="{x:Bind uAction_Click}"
										Tag="Copy"
									/>
									<MenuFlyoutSeparator />
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Refresh}}"
										Text="Reload"
										Click="{x:Bind uAction_Click}"
										Tag="Reload"
									/>
									<MenuFlyoutSubItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.OpenInNewWindow}}"
										Text="Reveal"
									>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.TreeFolderFolderOpen}}"
											Text="Root"
											Click="{x:Bind uAction_Click}"
											Tag="RevealRoot"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.ReportDocument}}"
											Text="Setting"
											Click="{x:Bind uAction_Click}"
											Tag="RevealSetting"
										/>
									</MenuFlyoutSubItem>
								</MenuFlyout>
							</my:Stack.ContextFlyout>
						</my:Stack>
					</DataTemplate>
				</ListView.ItemTemplate>
			</ListView>
		</my:Stack>
		<my:Divider Width="{StaticResource DividerThickness}" />
		<my:Stack
			Padding="0,-4,0,0"
			Width="352"
			VerticalAlignment="Stretch"
			Orientation="Vertical" Spacing="0"
		>
			<my:HeaderBar
				HorizontalAlignment="Stretch"
				Icon="{StaticResource FluentIconGlyph.ZipFolder}"
				Title="Group"
			>
				<my:HeaderBar.Action>
					<my:Stack
						Padding="0,0"
						Orientation="Horizontal" Spacing="8"
					>
						<Button
							VerticalAlignment="Center"
							Content="{community:FontIcon FontSize={StaticResource MediumIconSize}, Glyph={StaticResource FluentIconGlyph.More}}"
							IsEnabled="{x:Bind Controller.uLoadedAction_IsEnabled}"
						>
							<Button.Flyout>
								<MenuFlyout Placement="BottomEdgeAlignedRight">
									<MenuFlyoutSubItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.RepeatAll}}"
										Text="Transpile"
									>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.More}}"
											Text="Custom"
											Click="{x:Bind Controller.uGroupAction_Click}"
											Tag="TranspileCustom"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Previous}}"
											Text="Generalize"
											Click="{x:Bind Controller.uGroupAction_Click}"
											Tag="TranspileGeneralize"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Next}}"
											Text="Specialize"
											Click="{x:Bind Controller.uGroupAction_Click}"
											Tag="TranspileSpecialize"
										/>
									</MenuFlyoutSubItem>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Process}}"
										Text="Compile"
										Click="{x:Bind Controller.uGroupAction_Click}"
										Tag="Compile"
									/>
									<MenuFlyoutSeparator />
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Delete}}"
										Text="Delete"
										Click="{x:Bind Controller.uGroupAction_Click}"
										Tag="Delete"
									/>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.SaveCopy}}"
										Text="Copy"
										Click="{x:Bind Controller.uGroupAction_Click}"
										Tag="Copy"
									/>
									<MenuFlyoutSeparator />
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Refresh}}"
										Text="Reload"
										Click="{x:Bind Controller.uGroupAction_Click}"
										Tag="Reload"
									/>
									<MenuFlyoutSubItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.OpenInNewWindow}}"
										Text="Reveal"
									>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.TreeFolderFolderOpen}}"
											Text="Root"
											Click="{x:Bind Controller.uGroupAction_Click}"
											Tag="RevealRoot"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.ReportDocument}}"
											Text="Setting"
											Click="{x:Bind Controller.uGroupAction_Click}"
											Tag="RevealSetting"
										/>
									</MenuFlyoutSubItem>
								</MenuFlyout>
							</Button.Flyout>
						</Button>
					</my:Stack>
				</my:HeaderBar.Action>
			</my:HeaderBar>
			<my:Divider Height="{StaticResource DividerThickness}" />
			<ListView
				x:Name="uGroupList" x:FieldModifier="public"
				Padding="0,2,0,-2"
				my:Stack.Weight="1" VerticalAlignment="Stretch"
				HorizontalAlignment="Stretch"
				SelectionMode="Extended" IsItemClickEnabled="True"
				ItemsSource="{x:Bind uGroupList_ItemsSource.View}"
				SelectionChanged="{x:Bind Controller.uGroupList_SelectionChanged}"
				CanDragItems="True"
				DragItemsStarting="{x:Bind Controller.uGroupList_DragItemsStarting}"
				ItemContainerTransitions="{x:Null}"
				IsEnabled="{x:Bind Controller.uLoadedAction_IsEnabled}"
			>
				<ListView.ItemsPanel>
					<ItemsPanelTemplate>
						<ItemsStackPanel AreStickyGroupHeadersEnabled="True" />
					</ItemsPanelTemplate>
				</ListView.ItemsPanel>
				<ListView.GroupStyle>
					<GroupStyle HeaderContainerStyle="{StaticResource FullWidthListViewHeaderItem}">
						<GroupStyle.HeaderTemplate>
							<DataTemplate x:DataType="localViewPackageBuilder:MainPageGroupGroupController">
								<my:Stack
									Padding="12,0,4,0"
									HorizontalAlignment="Stretch"
									Orientation="Horizontal" Spacing="12"
								>
									<TextBlock
										my:Stack.Weight="1" HorizontalAlignment="Stretch"
										VerticalAlignment="Center"
										Style="{StaticResource SubtitleTextBlockStyle}"
										TextWrapping="NoWrap"
										Text="{x:Bind uName_Text}"
									/>
									<Button
										VerticalAlignment="Center"
										Content="{community:FontIcon FontSize={StaticResource MediumIconSize}, Glyph={StaticResource FluentIconGlyph.Add}}"
										Click="{x:Bind uActionAppend_Click}"
									/>
								</my:Stack>
							</DataTemplate>
						</GroupStyle.HeaderTemplate>
					</GroupStyle>
				</ListView.GroupStyle>
				<ListView.ItemTemplate>
					<DataTemplate x:DataType="localViewPackageBuilder:MainPageGroupItemController">
						<my:Stack
							Padding="0,8,4,8"
							Height="48"
							Orientation="Horizontal" Spacing="12"
							AllowDrop="True"
							DragOver="{x:Bind uRoot_DragOver}"
							Drop="{x:Bind uRoot_Drop}"
						>
							<my:Box
								Padding="0,0"
								my:Stack.Weight="1" HorizontalAlignment="Stretch"
								VerticalAlignment="Center"
							>
								<TextBlock
									Padding="11,0,0,0" HorizontalAlignment="Stretch"
									VerticalAlignment="Center"
									Visibility="{x:Bind uName_Visibility}"
									Style="{StaticResource BodyTextBlockStyle}"
									TextWrapping="NoWrap"
									Text="{x:Bind uName_Text}"
								/>
								<TextBox
									Padding="10,6,6,6" HorizontalAlignment="Stretch"
									VerticalAlignment="Center"
									Visibility="{x:Bind uNameEdit_Visibility}"
									IsEnabled="{x:Bind uNameEdit_IsEnabled}"
									IsEnabledChanged="{x:Bind uNameEdit_IsEnabledChanged}"
									Text="{x:Bind uName_Text}"
									LostFocus="{x:Bind uNameEdit_LostFocus}"
								/>
							</my:Box>
							<InfoBadge
								VerticalAlignment="Center"
								Value="{x:Bind uCount_Value}"
							/>
							<my:Stack.ContextFlyout>
								<MenuFlyout>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Sustainable}}"
										Text="Variable"
										Click="{x:Bind uAction_Click}"
										Tag="Variable"
									/>
									<MenuFlyoutSeparator />
									<MenuFlyoutSubItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.RepeatAll}}"
										Text="Transpile"
									>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.More}}"
											Text="Custom"
											Click="{x:Bind uAction_Click}"
											Tag="TranspileCustom"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Previous}}"
											Text="Generalize"
											Click="{x:Bind uAction_Click}"
											Tag="TranspileGeneralize"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Next}}"
											Text="Specialize"
											Click="{x:Bind uAction_Click}"
											Tag="TranspileSpecialize"
										/>
									</MenuFlyoutSubItem>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Process}}"
										Text="Compile"
										Click="{x:Bind uAction_Click}"
										Tag="Compile"
									/>
									<MenuFlyoutSeparator />
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Rename}}"
										Text="Rename"
										Click="{x:Bind uAction_Click}"
										Tag="Rename"
									/>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Delete}}"
										Text="Delete"
										Click="{x:Bind uAction_Click}"
										Tag="Delete"
									/>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.SaveCopy}}"
										Text="Copy"
										Click="{x:Bind uAction_Click}"
										Tag="Copy"
									/>
									<MenuFlyoutSeparator />
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Refresh}}"
										Text="Reload"
										Click="{x:Bind uAction_Click}"
										Tag="Reload"
									/>
									<MenuFlyoutSubItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.OpenInNewWindow}}"
										Text="Reveal"
									>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.TreeFolderFolderOpen}}"
											Text="Root"
											Click="{x:Bind uAction_Click}"
											Tag="RevealRoot"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.ReportDocument}}"
											Text="Setting"
											Click="{x:Bind uAction_Click}"
											Tag="RevealSetting"
										/>
									</MenuFlyoutSubItem>
								</MenuFlyout>
							</my:Stack.ContextFlyout>
						</my:Stack>
					</DataTemplate>
				</ListView.ItemTemplate>
			</ListView>
		</my:Stack>
		<my:Divider Width="{StaticResource DividerThickness}" />
		<my:Stack
			Padding="0,-4,0,0"
			my:Stack.Weight="1" HorizontalAlignment="Stretch" MinWidth="352"
			VerticalAlignment="Stretch"
			Orientation="Vertical" Spacing="0"
		>
			<my:HeaderBar
				HorizontalAlignment="Stretch"
				Icon="{StaticResource FluentIconGlyph.KnowledgeArticle}"
				Title="Resource"
			>
				<my:HeaderBar.Action>
					<my:Stack Padding="0,0" Orientation="Horizontal" Spacing="8">
						<Button
							VerticalAlignment="Center"
							Content="{community:FontIcon FontSize={StaticResource MediumIconSize}, Glyph={StaticResource FluentIconGlyph.More}}"
							IsEnabled="{x:Bind Controller.uLoadedAction_IsEnabled}"
						>
							<Button.Flyout>
								<MenuFlyout Placement="BottomEdgeAlignedRight">
									<MenuFlyoutSubItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.RepeatAll}}"
										Text="Transpile"
									>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.More}}"
											Text="Custom"
											Click="{x:Bind Controller.uResourceAction_Click}"
											Tag="TranspileCustom"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Previous}}"
											Text="Generalize"
											Click="{x:Bind Controller.uResourceAction_Click}"
											Tag="TranspileGeneralize"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Next}}"
											Text="Specialize"
											Click="{x:Bind Controller.uResourceAction_Click}"
											Tag="TranspileSpecialize"
										/>
									</MenuFlyoutSubItem>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Process}}"
										Text="Compile"
										Click="{x:Bind Controller.uResourceAction_Click}"
										Tag="Compile"
									/>
									<MenuFlyoutSeparator />
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Delete}}"
										Text="Delete"
										Click="{x:Bind Controller.uResourceAction_Click}"
										Tag="Delete"
									/>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.SaveCopy}}"
										Text="Copy"
										Click="{x:Bind Controller.uResourceAction_Click}"
										Tag="Copy"
									/>
									<MenuFlyoutSeparator />
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Refresh}}"
										Text="Reload"
										Click="{x:Bind Controller.uResourceAction_Click}"
										Tag="Reload"
									/>
									<MenuFlyoutSubItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.OpenInNewWindow}}"
										Text="Reveal"
									>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.TreeFolderFolderOpen}}"
											Text="Root"
											Click="{x:Bind Controller.uResourceAction_Click}"
											Tag="RevealRoot"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.ReportDocument}}"
											Text="Setting"
											Click="{x:Bind Controller.uResourceAction_Click}"
											Tag="RevealSetting"
										/>
									</MenuFlyoutSubItem>
								</MenuFlyout>
							</Button.Flyout>
						</Button>
					</my:Stack>
				</my:HeaderBar.Action>
			</my:HeaderBar>
			<my:Divider Height="{StaticResource DividerThickness}" />
			<ListView
				x:Name="uResourceList" x:FieldModifier="public"
				Padding="0,2,0,-2"
				my:Stack.Weight="1" VerticalAlignment="Stretch"
				HorizontalAlignment="Stretch"
				SelectionMode="Extended" IsItemClickEnabled="True"
				ItemsSource="{x:Bind uResourceList_ItemsSource.View}"
				CanDragItems="True"
				DragItemsStarting="{x:Bind Controller.uResourceList_DragItemsStarting}"
				ItemContainerTransitions="{x:Null}"
				IsEnabled="{x:Bind Controller.uLoadedAction_IsEnabled}"
			>
				<ListView.ItemsPanel>
					<ItemsPanelTemplate>
						<ItemsStackPanel AreStickyGroupHeadersEnabled="True" />
					</ItemsPanelTemplate>
				</ListView.ItemsPanel>
				<ListView.GroupStyle>
					<GroupStyle HeaderContainerStyle="{StaticResource FullWidthListViewHeaderItem}">
						<GroupStyle.HeaderTemplate>
							<DataTemplate x:DataType="localViewPackageBuilder:MainPageResourceGroupController">
								<my:Stack
									Padding="12,0,4,0"
									HorizontalAlignment="Stretch"
									Orientation="Horizontal" Spacing="12"
								>
									<TextBlock
										my:Stack.Weight="1" HorizontalAlignment="Stretch"
										VerticalAlignment="Center"
										Style="{StaticResource SubtitleTextBlockStyle}"
										TextWrapping="NoWrap"
										Text="{x:Bind uName_Text}"
									/>
									<Button
										VerticalAlignment="Center"
										Content="{community:FontIcon FontSize={StaticResource MediumIconSize}, Glyph={StaticResource FluentIconGlyph.Add}}"
										Click="{x:Bind uActionAppend_Click}"
									/>
								</my:Stack>
							</DataTemplate>
						</GroupStyle.HeaderTemplate>
					</GroupStyle>
				</ListView.GroupStyle>
				<ListView.ItemTemplate>
					<DataTemplate x:DataType="localViewPackageBuilder:MainPageResourceItemController">
						<my:Stack
							Padding="0,8,4,8"
							Height="48"
							Orientation="Horizontal" Spacing="12"
							AllowDrop="True"
						>
							<my:Box
								Padding="0,0"
								my:Stack.Weight="1" HorizontalAlignment="Stretch"
								VerticalAlignment="Center"
							>
								<TextBlock
									Padding="11,0,0,0"
									HorizontalAlignment="Stretch" VerticalAlignment="Center"
									Visibility="{x:Bind uName_Visibility}"
									Style="{StaticResource BodyTextBlockStyle}"
									TextWrapping="NoWrap"
									Text="{x:Bind uName_Text}"
								/>
								<TextBox
									Padding="10,6,6,6"
									HorizontalAlignment="Stretch" VerticalAlignment="Center"
									Visibility="{x:Bind uNameEdit_Visibility}"
									IsEnabled="{x:Bind uNameEdit_IsEnabled}"
									IsEnabledChanged="{x:Bind uNameEdit_IsEnabledChanged}"
									Text="{x:Bind uName_Text}"
									LostFocus="{x:Bind uNameEdit_LostFocus}"
								/>
							</my:Box>
							<my:Stack
								Padding="0,0"
								VerticalAlignment="Center"
								Orientation="Horizontal" Spacing="8"
							>
								<SplitButton
									Width="132"
									VerticalAlignment="Center"
									HorizontalContentAlignment="Stretch"
									Click="{x:Bind uType_Click}"
								>
									<my:Stack
										Padding="0,0"
										Orientation="Horizontal" Spacing="8"
									>
										<FontIcon
											Width="16"
											VerticalAlignment="Center"
											FontSize="16"
											Glyph="{x:Bind uTypeIcon_Glyph}"
										/>
										<TextBlock
											my:Stack.Weight="1" HorizontalAlignment="Stretch"
											VerticalAlignment="Center"
											TextAlignment="Center"
											Style="{ThemeResource BodyTextBlockStyle}"
											TextWrapping="NoWrap"
											Text="{x:Bind uTypeText_Text}"
										/>
									</my:Stack>
									<SplitButton.Flyout>
										<MenuFlyout Placement="BottomEdgeAlignedRight">
											<MenuFlyoutItem
												Width="130"
												Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Preview}}"
												Text="Dummy"
												Click="{x:Bind uTypeCast_Click}"
												Tag="Dummy"
											/>
											<MenuFlyoutItem
												Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Document}}"
												Text="General"
												Click="{x:Bind uTypeCast_Click}"
												Tag="General"
											/>
											<MenuFlyoutItem
												Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Tiles}}"
												Text="Texture"
												Click="{x:Bind uTypeCast_Click}"
												Tag="Texture"
											/>
											<MenuFlyoutSeparator />
											<MenuFlyoutItem
												Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.KnowledgeArticle}}"
												Text="RTON"
												Click="{x:Bind uTypeCast_Click}"
												Tag="SpecialRton"
											/>
											<MenuFlyoutItem
												Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Picture}}"
												Text="PTX"
												Click="{x:Bind uTypeCast_Click}"
												Tag="SpecialPtx"
											/>
											<MenuFlyoutItem
												Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.HomeGroup}}"
												Text="PAM"
												Click="{x:Bind uTypeCast_Click}"
												Tag="SpecialPam"
											/>
											<MenuFlyoutItem
												Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Audio}}"
												Text="WEM"
												Click="{x:Bind uTypeCast_Click}"
												Tag="SpecialWem"
											/>
										</MenuFlyout>
									</SplitButton.Flyout>
								</SplitButton>
								<Button
									VerticalAlignment="Center"
									Content="{community:FontIcon FontSize={StaticResource MediumIconSize}, Glyph={StaticResource FluentIconGlyph.Tag}}"
									Style="{x:Bind uCategory_Style}"
								>
									<Button.Flyout>
										<Flyout Placement="BottomEdgeAlignedRight" FlyoutPresenterStyle="{StaticResource CompatFlyoutPresenterStyle}" Closed="{x:Bind uCategoryFlyout_Closed}">
											<my:Stack
												Padding="8,8"
												Width="179"
												Orientation="Vertical" Spacing="8"
											>
												<my:Stack
													Padding="0,0"
													HorizontalAlignment="Stretch"
													Orientation="Horizontal" Spacing="8"
												>
													<FontIcon
														Margin="4,0"
														VerticalAlignment="Center"
														FontSize="{StaticResource SmallIconSize}"
														Glyph="{StaticResource FluentIconGlyph.Picture}"
													/>
													<TextBox
														my:Stack.Weight="1" HorizontalAlignment="Stretch"
														VerticalAlignment="Stretch"
														Text="{x:Bind uCategoryResolution_Text}"
														LostFocus="{x:Bind uCategoryResolution_LostFocus}"
													/>
												</my:Stack>
												<my:Stack
													Padding="0,0"
													HorizontalAlignment="Stretch"
													Orientation="Horizontal" Spacing="8"
												>
													<FontIcon
														Margin="4,0"
														VerticalAlignment="Center"
														FontSize="{StaticResource SmallIconSize}"
														Glyph="{StaticResource FluentIconGlyph.LocaleLanguage}"
													/>
													<TextBox
														my:Stack.Weight="1" HorizontalAlignment="Stretch"
														VerticalAlignment="Stretch"
														Text="{x:Bind uCategoryLocale_Text}"
														LostFocus="{x:Bind uCategoryLocale_LostFocus}"
													/>
												</my:Stack>
											</my:Stack>
										</Flyout>
									</Button.Flyout>
								</Button>
							</my:Stack>
							<my:Stack.ContextFlyout>
								<MenuFlyout>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Sustainable}}"
										Text="Variable"
										Click="{x:Bind uAction_Click}"
										Tag="Variable"
									/>
									<MenuFlyoutSeparator />
									<MenuFlyoutSubItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.RepeatAll}}"
										Text="Transpile"
									>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.More}}"
											Text="Custom"
											Click="{x:Bind uAction_Click}"
											Tag="TranspileCustom"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Previous}}"
											Text="Generalize"
											Click="{x:Bind uAction_Click}"
											Tag="TranspileGeneralize"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Next}}"
											Text="Specialize"
											Click="{x:Bind uAction_Click}"
											Tag="TranspileSpecialize"
										/>
									</MenuFlyoutSubItem>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Process}}"
										Text="Compile"
										Click="{x:Bind uAction_Click}"
										Tag="Compile"
									/>
									<MenuFlyoutSeparator />
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Rename}}"
										Text="Rename"
										Click="{x:Bind uAction_Click}"
										Tag="Rename"
									/>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Delete}}"
										Text="Delete"
										Click="{x:Bind uAction_Click}"
										Tag="Delete"
									/>
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.SaveCopy}}"
										Text="Copy"
										Click="{x:Bind uAction_Click}"
										Tag="Copy"
									/>
									<MenuFlyoutSeparator />
									<MenuFlyoutItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.Refresh}}"
										Text="Reload"
										Click="{x:Bind uAction_Click}"
										Tag="Reload"
									/>
									<MenuFlyoutSubItem
										Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.OpenInNewWindow}}"
										Text="Reveal"
									>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.TreeFolderFolderOpen}}"
											Text="Root"
											Click="{x:Bind uAction_Click}"
											Tag="RevealRoot"
										/>
										<MenuFlyoutItem
											Icon="{community:FontIcon Glyph={StaticResource FluentIconGlyph.ReportDocument}}"
											Text="Setting"
											Click="{x:Bind uAction_Click}"
											Tag="RevealSetting"
										/>
									</MenuFlyoutSubItem>
								</MenuFlyout>
							</my:Stack.ContextFlyout>
						</my:Stack>
					</DataTemplate>
				</ListView.ItemTemplate>
			</ListView>
		</my:Stack>
	</my:Stack>
</Page>
